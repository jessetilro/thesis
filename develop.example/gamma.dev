module gamma

model

  entity Summary {
    total : Int = sum(counting_numbers.value)
    average : Int = avg(counting_numbers.value) <+ 0
    maximum : Int = max(counting_numbers.value) <+ 0
  }
  
  entity Number {
    value : Int = 0 (default)
    counting : Boolean = true (default)
  }
  
  relation Summary.numbers * <-> 1 Number.summary
  relation Summary.counting_numbers * = numbers.filter(x => x.counting).orderBy(x => x.value) <-> ? Number.summary_as_counting
  relation Summary.maximum_number ? = counting_numbers.find(x => x.value == x.summary.maximum) <-> ? Number.summary_as_maximum